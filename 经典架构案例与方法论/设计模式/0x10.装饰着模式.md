# 装饰者模式

## 0x01.定义与类型

- 定义：再不改变原有对象的基础之上，将功能附加到对象上
- 提供了比继承更有弹性的替代方案（扩展原有对象功能）
- 类型：结构型

## 0x02.使用场景

- 扩展一个类的功能或给一个类添加附加职责
- 动态的给一个对象添加功能，这些功能可以再动态的撤销

## 0x03.优点

- 继承的有力补充，比继承灵活，不改变原有对象的情况下给一个对象扩展功能
- 通过使用不同装饰类以及这些装饰类的排列组合，可以实现不同效果
- 符合开闭原则

## 0x04.缺点

- 会出现更多的代码，更多的类，增加程序复杂性
- 动态装饰时，多层装饰时会更复杂

## 0x05.相关设计模式

- 装饰者模式和代理模式
    - 装饰者模式：关注再一个对象上动态添加方法
    - 代理模式：关注再对代理对象的控制访问，可以对客户隐藏被代理类的信息
- 装饰着模式和适配器模式
    - 都叫包装模式

![18012b1bf065e07e434af4ed381b447e.png](en-resource://database/1587:0)

![a7dcb724efc024124abd58296c8b6a61.png](en-resource://database/1589:0)

装饰者最上层的类是否适用抽象类，这个是看业务的。


## 0x06.源码中的装饰者

- BufferedReader
- BufferInputStream/BufferOutputStream
![65c6a3037b95fa79634255089f1fa79f.png](en-resource://database/1591:0)

- Spring. TransactionAwareCacheDecorator
- Mybatis. Cache

